Estoy construyendo un actualizador de catedras (comisiones) para mi aplicacion de reviews de los docentes de mi facultad. Para esto, estoy obteniendo los listados de las ofertas de comisiones de todas las materias de todas las carreras de la facultad (solo las ofertas que esten publicadas para cada cuatrimestre del que cuento con los planes, hay materias que a veces no ofrecen catedra en un cuatrimestre, por lo tanto, podria no tener informacion de todas).

Una vez se tienen cargadas todas las ofertas de comisiones de todas las materias disponibles, me quedo solamente con la version mas reciente de cada materia, es decir, si para una materia hay ofertas del primer cuatrimestre de 2025 y tambien del segundo de 2024, voy a preferir quedarme con la mas reciente. Esto se hace porque las ofertas son retornadas en orden cronologico descendente, dado el codigo de su cuatrimestre, que tambien sigue esta convencion en la base de datos.

Una vez hecho esto se tienen que sincronizar las materias de la base de datos que todavia no estan asociadas con su equivalente del siu. Esto sucede porque cuando se populo la base de datos con las materias de los nuevos planes, se desconocian los codigos de las mismas. Cabe destacar que solo tengo interes en trabajar con las materias de los nuevos planes de ahora en adelante. Una materia del nuevo plan que esta desincronizada con una del siu tiene un codigo con un placeholder COD, por lo que codigo_siu != codigo_db, y tampoco tiene ni docentes, ni comentarios, ni calificaciones, ni catedras asociadas. Sin embargo, si puedo asegurar que los nombres normalizados coinciden para dos materias que son iguales, aunque no esten sincronizadas aun, es por esto que la query de sincronizacion que utilizo hace este match por nombre normalizado.

Cuando se sincroniza una materia, ademas de corregir el codigo y poner el codigo correcto (el traido de las ofertas de comisiones del siu), se copian todos los docentes, comentarios y calificaciones de las equivalencias de esa materia en los planes que no estan vigentes. Se puede asumir que la combinacion (nombre_docente, codigo_materia) es unica para las materias del plan anterior, lo que significa que, si cuando se migran estos datos de una materia que tiene multiples equivalencias a una sola, por ejemplo, si la materia CB001 del nueva plan tiene como equivalencia a la materia M1, M2, M3, y estas tres materias, si bien son tecnicamente diferentes en la base de datos, realmente contienen los mismos datos duplicados, cuando se haga la migracion esta condicion de unicidad se rompe, por lo que, para evitar conflictos, nos terminamos quedando con la copia del docente que mas informacion (calificaciones) tenga asociada.

Luego de la sincronizacion viene el paso de preparacion para planificar las actualizacion que se van a hacer en la base de datos. Recordemos que el objetivo final del actualizador es justamente actualizar las comisiones disponibles para una materia (catedras). Actualmente estoy en el proceso de dise√±o de esta funcionalidad, quiero que me ayudes a implementarla.

Tenes acceso a la base de datos para ver la estructura general de la misma y hacer queries de solo lectura.
